<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <p>Rock Paper Scissors</p>
    <p>
      <button onclick="choosePlay('Rock');">Rock</button>
      <button onclick="choosePlay('Paper');">Paper</button>
      <button onclick="choosePlay('Scissors');">Scissors</button>
    </p>
    <p class="js-result"></p>
    <p class="js-score">
      You <span class="js-players-option"></span> -
      <span class="js-computers-option"></span> Computer
    </p>
    <p>
      Wins: <span class="js-wins"></span>, Losses:
      <span class="js-looses"></span>, Ties: <span class="js-ties"></span>
    </p>
    <button onclick="resetScore();">Reset Score</button>

    <script>
      let scoreCard = {
        wins: 0,
        losses: 0,
        ties: 0,
      };

      document.querySelector(".js-score").style.display = "none";

      // local storage only takes string
      const savedScore = localStorage.getItem("score");
      if (savedScore) {
        scoreCard = JSON.parse(savedScore);
      }

      document.querySelector(".js-wins").innerText = scoreCard.wins;
      document.querySelector(".js-looses").innerText = scoreCard.losses;
      document.querySelector(".js-ties").innerText = scoreCard.ties;

      function updateScoreDisplay() {
        document.querySelector(".js-wins").textContent = scoreCard.wins;
        document.querySelector(".js-looses").textContent = scoreCard.losses;
        document.querySelector(".js-ties").textContent = scoreCard.ties;
      }

      function chooseRandom() {
        const randomNumber = Math.random();
        let computerMove = "";
        if (randomNumber >= 0 && randomNumber < 1 / 3) {
          computerMove = "Rock";
        } else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3) {
          computerMove = "Paper";
        } else {
          computerMove = "Scissors";
        }

        return computerMove;
      }

      function choosePlay(option) {
        let computerOption = chooseRandom();
        document.querySelector(".js-players-option").innerText = option;
        document.querySelector(".js-computers-option").innerText =
          computerOption;
        if (option === computerOption) {
          scoreCard.ties++;
          document.querySelector(".js-result").innerHTML = "Tie.";
        } else {
          if (option === "Rock") {
            if (computerOption === "Paper") {
              scoreCard.losses++;
              document.querySelector(".js-result").innerHTML = "You Lose.";
            } else {
              scoreCard.wins++;
              document.querySelector(".js-result").innerHTML = "You Win.";
            }
          } else if (option === "Paper") {
            if (computerOption === "Rock") {
              scoreCard.wins++;
              document.querySelector(".js-result").innerHTML = "You Win.";
            } else {
              scoreCard.losses++;
              document.querySelector(".js-result").innerHTML = "You Lose.";
            }
          } else {
            if (computerOption === "Rock") {
              scoreCard.losses++;
              document.querySelector(".js-result").innerHTML = "You Lose.";
            } else {
              scoreCard.wins++;
              document.querySelector(".js-result").innerHTML = "You Win.";
            }
          }
        }
        localStorage.setItem("score", JSON.stringify(scoreCard));
        updateScoreDisplay();
        document.querySelector(".js-score").style.display = "inline";
      }
      function resetScore() {
        scoreCard.wins = 0;
        scoreCard.losses = 0;
        scoreCard.ties = 0;
        alert(`Scorecard reset`);
        localStorage.setItem("score", JSON.stringify(scoreCard));
        updateScoreDisplay();
      }
    </script>
  </body>
</html>
